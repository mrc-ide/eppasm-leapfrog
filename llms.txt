# eppasm

The goal of eppasm is to â€¦

Forked from [eppasm](https://github.com/mrc-ide/eppasm) using
[leapfrog](https://github.com/mrc-ide/leapfrog) as the underlying model.

## Installation

Install from [GitHub](https://github.com/) with:

``` r
# install.packages("remotes")
remotes::install_github("mrc-ide/eppasm-leapfrog")
```

## Example

## Test files

### Botswana2018.PJNZ

- Urban/Rural epidemic configuration
- ANC-RT census data, no site-level ANC-RT data

### Mozambique_Maputo_Cidade.PJNZ

- Subnational, single EPP region configuration
- Uses median CD4 count input

# Package index

## All functions

- [`agemx(`*`<spec>`*`)`](https://mrc-ide.github.io/eppasm-leapfrog/reference/agemx.spec.md)
  : Age-specific mortality
- [`agepregartcov()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/agepregartcov.md)
  : Age-specific ART coverage among pregnant women
- [`agepregprev()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/agepregprev.md)
  : Age-specific prevalence among pregnant women
- [`ageprev()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/ageprev.md)
  : Prevalence by arbitrary age groups
- [`ancsite_pred_df()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/ancsite_pred_df.md)
  : Prepare design matrix indices for ANC prevalence predictions
- [`calc_infections_eppspectrum()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/calc_infections_eppspectrum.md)
  : Annualized number of new infections
- [`create_aggr_outputs()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/create_aggr_outputs.md)
  : Crate aggr outputs
- [`create_spectrum_fixpar()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/create_spectrum_fixpar.md)
  : Create simulation inputs fixed parameters
- [`get_proj_years()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/get_proj_years.md)
  : Get vector of years spanned by projections
- [`hivpop_singleage()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/hivpop_singleage.md)
  : Convert aggregate HIV population to single year
- [`imis()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/imis.md)
  : Incremental Mixture Importance Sampling (IMIS)
- [`incid()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/incid.md)
  : Incidence rate among adults age 15-49 years
- [`incid15to49_eppinput_specres()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/incid15to49_eppinput_specres.md)
  : Incidence rate age 15-49 using previous-year susceptible population
- [`ll_ancsite_conditional()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/ll_ancsite_conditional.md)
  : Pointwise likelihood for site-level ANC observations given
  site-level effects
- [`ll_hhsage()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/ll_hhsage.md)
  : Log likelihood for age-specific household survey prevalence
- [`ll_hhsage_binom()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/ll_hhsage_binom.md)
  : Log likelihood for age-specific household survey prevalence using
  binomial approximation
- [`ll_hhsartcov()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/ll_hhsartcov.md)
  : Log likelihood for age-specific household survey prevalence
- [`ll_hhsincid()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/ll_hhsincid.md)
  : Log-likelhood for direct incidence estimate from household survey
- [`melt_ancsite_data()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/melt_ancsite_data.md)
  : Melt ANC-SS and site-level ANC-RT to long dataset
- [`mod_dimnames()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/mod_dimnames.md)
  : Add dimnames to spec model output
- [`natagemx(`*`<spec>`*`)`](https://mrc-ide.github.io/eppasm-leapfrog/reference/natagemx.spec.md)
  : Non-HIV age-specific mortality
- [`prep_fp_fitmod()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/prep_fp_fitmod.md)
  : Prepare fp object for fitting and prepare likelihood data
- [`prepare_ancsite_likdat()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/prepare_ancsite_likdat.md)
  : Prepare site-level ANC prevalence data for EPP random-effects
  likelihood
- [`prepare_directincid()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/prepare_directincid.md)
  : Prepare direct incidence input EPP simulation
- [`prepare_hhsageprev_likdat()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/prepare_hhsageprev_likdat.md)
  : Prepare age-specific HH survey prevalence likelihood data
- [`prepare_hhsartcov_likdat()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/prepare_hhsartcov_likdat.md)
  : \## Household survey ART coverage likelihood
- [`prepare_hhsincid_likdat()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/prepare_hhsincid_likdat.md)
  : Prepare household survey incidence likelihood data
- [`prepare_rhybrid()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/prepare_rhybrid.md)
  : Setup the r-hybrid model
- [`prepare_spec_fit()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/prepare_spec_fit.md)
  : Prepare fit by EPP regions
- [`read_csavr_data()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/read_csavr_data.md)
  : Read CSAVR input data
- [`read_dp()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/read_dp.md)
  : Read Spectrum internal files file from PJNZ
- [`read_epp_perc_urban()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/read_epp_perc_urban.md)
  : Read percentage urban input from EPP XML file
- [`read_epp_t0()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/read_epp_t0.md)
  : Read epidemic start year from EPP XML file
- [`read_incid_input()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/read_incid_input.md)
  : Read annual incidence input
- [`read_pop1()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/read_pop1.md)
  : Read Spectrum \_pop1.xlsx export file
- [`read_subp_file()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/read_subp_file.md)
  : Read subpopulation size input file
- [`sample_ancsite_pred()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/sample_ancsite_pred.md)
  : Sample posterior predictions for site-level ANC observations
- [`sample_b_site()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/sample_b_site.md)
  : Sample from posterior ditribution for ANC site level random effects
- [`sample_invgamma_post()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/sample_invgamma_post.md)
  : Sample from conditional posterior distribution for variance
  parameter
- [`simmod()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/simmod.md)
  : Simulate model
- [`spec_add_dimnames()`](https://mrc-ide.github.io/eppasm-leapfrog/reference/spec_add_dimnames.md)
  : Add dimnames to EPP-ASM model output

# Articles

### All vignettes

- [Example of using EPPASM with leapfrog model
  engine](https://mrc-ide.github.io/eppasm-leapfrog/articles/eppasm-leapfrog.md):
